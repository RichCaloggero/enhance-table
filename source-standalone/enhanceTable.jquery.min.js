!function(t,e,n,r){"use strict";var i="enhanceTable",a={sortable:!0,enableFieldChooser:!0,sortableHeaderRowClass:"sortable"};function o(e,n){this.element=e,this.settings=t.extend({},a,n),this._defaults=a,this._name=i,this.init()}t.extend(o.prototype,{init:function(){this.settings.sortable&&this.makeSortable(),this.settings.enableFieldChooser&&this.makeFieldChooser()},makeSortable:function(){let t=this.element;if(!(HTMLElement&&t instanceof HTMLElement))throw"makeSortable requires a DOM node as first argument";let e=t.querySelector(`tr.${this.settings.sortableHeaderRowClass}`)||t.querySelector("tr th").parentElement||null;if(!e)throw"invalid table, must contain at least 1 'tr' element";return function(t,e){Array.from(e.querySelectorAll("th")).map(t=>{t.innerHTML=`<button>${t.textContent}</button>`,t.setAttribute("aria-sort","")})}(0,e),e.addEventListener("click",function(i){let a=i.target.parentElement;if("th"===!a.tagName.toLowerCase())return;let o=a.getAttribute("aria-sort");o?o="ascending"===o?"descending":"ascending":(!function(t){Array.from(t.querySelectorAll("[aria-sort]")).forEach(t=>t.setAttribute("aria-sort",""))}(e),o="ascending");return a.setAttribute("aria-sort",o),void function(t,e,i){let a=util.extractData(t),o="ascending"===i?n:r;a.sort((t,n)=>o(t[e],n[e])),util.rewriteData(t,a)}(t,function(t){return Array.from(t.parentElement.children).indexOf(t)}(a),o)}),t;function n(t,e){return(t=Number(t)||t)<(e=Number(e)||e)?-1:t>e?1:0}function r(t,e){return(t=Number(t)||t)<(e=Number(e)||e)?1:t>e?-1:0}},makeFieldChooser:function(){let e=this,n=this.element,r=util.extractFieldNames(n),i=util.extractData(n),a=util.createUnorderedDataStore(i,r),o=t(`<tr><td colspan="${r.length}"><button class="fieldChooser">Choose Fields</button></td></tr>`);t("thead",n).prepend(o),o.on("click",function s(){createFieldChooser(r,l=>{l&&(console.log("new field names found -- refreshing table"),r=l,i=util.createOrderedData(a,r),t(n).empty(),util.createTable(n,r,i),t("thead",n).prepend(o),e.settings.sortable&&e.makeSortable(),o.on("click",s)),t(n).find(o).find("button").focus()})})}}),t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new o(this,e))})}}(jQuery,window,document);